<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyseur de Sites Web Pro - Analyse Compl√®te SEO, Performance & S√©curit√©</title>
    <meta name="description" content="Analyseur professionnel de sites web avec d√©tection de sites suspects, analyse SEO avanc√©e, performance, accessibilit√© et s√©curit√©. Gratuit et sans inscription.">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --dark-text: #333333;
            --shadow-light: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-medium: 0 4px 8px rgba(0,0,0,0.15);
            --shadow-heavy: 0 8px 32px rgba(0,0,0,0.2);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: var(--primary-gradient);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }

        .main-content {
            padding: 2rem;
        }

        .analysis-form {
            background: var(--light-bg);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-medium);
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-section h3 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }

        .url-input {
            width: 100%;
            padding: 1.2rem;
            border: 2px solid #e0e6ed;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            transition: var(--transition);
            background: var(--white);
            font-family: inherit;
        }

        .url-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .option-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            border: 1px solid #e9ecef;
            transition: var(--transition);
        }

        .option-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .option-card h4 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-col {
            flex: 1;
            min-width: 200px;
        }

        select, .checkbox-group {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            background: var(--white);
            font-size: 0.95rem;
            transition: var(--transition);
        }

        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .checkbox-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            background: var(--white);
            border: 1px solid #e9ecef;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
        }

        .checkbox-item:hover {
            background: #f8f9ff;
            border-color: #667eea;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 500;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn {
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            font-family: inherit;
            text-align: center;
            min-width: 200px;
            justify-content: center;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-whatsapp {
            background: #25d366;
            color: white;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
        }

        .btn-whatsapp:hover {
            background: #128c7e;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.6);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-2px);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 3rem;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin: 2rem 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px;
            animation: progress 3s ease-in-out infinite;
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        .results {
            display: none;
            margin-top: 2rem;
        }

        .results.show {
            display: block;
        }

        .result-header {
            background: var(--primary-gradient);
            color: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            text-align: center;
        }

        .result-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--shadow-light);
            border: 1px solid #e9ecef;
            transition: var(--transition);
        }

        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .summary-score {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .score-excellent { color: var(--success-color); }
        .score-good { color: var(--info-color); }
        .score-medium { color: var(--warning-color); }
        .score-poor { color: var(--danger-color); }

        .result-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 1rem 1.5rem;
            background: var(--white);
            border: 1px solid #e9ecef;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .tab-button:hover:not(.active) {
            background: #f8f9ff;
            border-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .result-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-medium);
            border-left: 4px solid #667eea;
            transition: var(--transition);
        }

        .result-card:hover {
            box-shadow: var(--shadow-heavy);
        }

        .result-card h3 {
            color: #667eea;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-item {
            background: var(--light-bg);
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 3px solid #667eea;
            transition: var(--transition);
        }

        .info-item:hover {
            background: #f0f4ff;
            transform: translateY(-1px);
        }

        .info-item strong {
            display: block;
            color: #333;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .info-value {
            font-size: 1rem;
            color: #555;
            line-height: 1.4;
        }

        .status-excellent { color: var(--success-color); font-weight: 600; }
        .status-good { color: var(--info-color); font-weight: 600; }
        .status-warning { color: var(--warning-color); font-weight: 600; }
        .status-bad { color: var(--danger-color); font-weight: 600; }

        .score-display {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--light-bg);
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            box-shadow: var(--shadow-medium);
            flex-shrink: 0;
        }

        .score-details h4 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .score-details p {
            color: #666;
            margin-bottom: 0.5rem;
        }

        .recommendations {
            margin-top: 2rem;
        }

        .recommendations h4 {
            color: #667eea;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recommendation-list {
            list-style: none;
        }

        .recommendation-list li {
            background: #fff3cd;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            border-left: 3px solid #ffc107;
            transition: var(--transition);
        }

        .recommendation-list li:hover {
            background: #fff1b3;
        }

        .good-points h4 {
            color: var(--success-color);
        }

        .good-points li {
            background: #d4edda;
            border-left-color: var(--success-color);
        }

        .good-points li:hover {
            background: #c3e6cb;
        }

        .suspicious-alert {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-heavy);
        }

        .suspicious-normal {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-heavy);
        }

        .links-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .link-item {
            padding: 1rem;
            border-bottom: 1px solid #f1f3f4;
            transition: var(--transition);
        }

        .link-item:hover {
            background: var(--light-bg);
        }

        .link-item:last-child {
            border-bottom: none;
        }

        .link-text {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .link-url {
            font-size: 0.9rem;
            color: #666;
            word-break: break-all;
        }

        .error-message {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-top: 1rem;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .footer-info {
            background: var(--light-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 2rem;
        }

        .technology-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tech-tag {
            background: #667eea;
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                min-width: 250px;
            }
            
            .result-tabs {
                flex-direction: column;
            }
            
            .tab-button {
                text-align: center;
            }
            
            .score-display {
                flex-direction: column;
                text-align: center;
            }
            
            .checkbox-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .main-content, .analysis-form {
                padding: 1rem;
            }
            
            .header {
                padding: 2rem 1rem;
            }
        }

        /* Animations d'entr√©e */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üîç Analyseur de Sites Web Pro</h1>
            <p>Analyse compl√®te : SEO, Performance, S√©curit√©, Accessibilit√© & D√©tection de menaces</p>
        </header>

        <div class="main-content">
            <div class="analysis-form fade-in">
                <div class="form-section">
                    <h3>üåê Site √† analyser</h3>
                    <div class="input-group">
                        <label for="urlInput">URL du site web</label>
                        <input 
                            type="text" 
                            id="urlInput" 
                            class="url-input"
                            placeholder="https://example.com ou example.com"
                            autocomplete="url"
                        >
                    </div>
                </div>

                <div class="options-grid">
                    <div class="option-card">
                        <h4>üó£Ô∏è Param√®tres de langue</h4>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="languageSelect">Langue de la page</label>
                                <select id="languageSelect">
                                    <option value="auto">D√©tection automatique</option>
                                    <option value="fr">Fran√ßais</option>
                                    <option value="en">Anglais</option>
                                    <option value="es">Espagnol</option>
                                    <option value="it">Italien</option>
                                    <option value="pt">Portugais</option>
                                    <option value="de">Allemand</option>
                                    <option value="nl">N√©erlandais</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="option-card">
                        <h4>ü§ñ User-Agent</h4>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="userAgentSelect">S'identifier comme</label>
                                <select id="userAgentSelect">
                                    <optgroup label="Analyseur">
                                        <option value="alyze-desktop">Alyze (desktop)</option>
                                        <option value="alyze-mobile">Alyze (mobile)</option>
                                    </optgroup>
                                    <optgroup label="Navigateurs">
                                        <option value="chrome-windows">Chrome (Windows)</option>
                                        <option value="chrome-android">Chrome (Android)</option>
                                        <option value="safari-macos">Safari (Mac OS)</option>
                                        <option value="edge-windows">Edge (Windows)</option>
                                    </optgroup>
                                    <optgroup label="Moteurs de recherche">
                                        <option value="googlebot">Googlebot (Google Search)</option>
                                        <option value="googlebot-mobile">Googlebot-mobile (Google Search)</option>
                                        <option value="bingbot">Bingbot (Bing)</option>
                                        <option value="mediapartners">Mediapartners (Adsense)</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="option-card">
                        <h4>üåç Localisation</h4>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="locationSelect">Localisation g√©ographique</label>
                                <select id="locationSelect">
                                    <option value="france-paris">France (Paris)</option>
                                    <option value="france-nice">France (Nice)</option>
                                    <option value="usa-washington">USA (Washington D.C.)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="option-card">
                        <h4>‚öôÔ∏è Options avanc√©es</h4>
                        <div class="checkbox-item">
                            <input type="checkbox" id="followRedirects" checked>
                            <label for="followRedirects">Suivre les redirections</label>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üîç Types d'analyse</h3>
                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="seoAnalysis" checked>
                            <label for="seoAnalysis">üìà Analyse SEO compl√®te</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="performanceAnalysis" checked>
                            <label for="performanceAnalysis">‚ö° Analyse de performance</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="securityAnalysis" checked>
                            <label for="securityAnalysis">üîí Analyse de s√©curit√©</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="accessibilityAnalysis" checked>
                            <label for="accessibilityAnalysis">‚ôø Analyse d'accessibilit√©</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="detectSuspicious" checked>
                            <label for="detectSuspicious">üõ°Ô∏è D√©tection de sites suspects</label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="analyzeBtn">
                        üöÄ Lancer l'analyse compl√®te
                    </button>
                    <a href="https://wa.me/+237XXXXXXXXX?text=Bonjour%2C%20j%27aimerais%20une%20aide%20pour%20le%20SEO%20et%20l%27optimisation%20de%20mon%20site%20web" 
                       class="btn btn-whatsapp" 
                       target="_blank">
                        üì± Aide SEO / Contact Expert
                    </a>
                    <button class="btn btn-secondary" id="clearCacheBtn">
                        üóëÔ∏è Vider le cache
                    </button>
                </div>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <h3>Analyse en cours...</h3>
                <p>Veuillez patienter pendant que nous analysons le site web de fa√ßon approfondie.</p>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p><small>Cette op√©ration peut prendre jusqu'√† 30 secondes selon la taille du site.</small></p>
            </div>

            <div class="results" id="results">
                <!-- Les r√©sultats seront affich√©s ici par JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        const urlInput = document.getElementById('urlInput');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const clearCacheBtn = document.getElementById('clearCacheBtn');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const languageSelect = document.getElementById('languageSelect');
        const userAgentSelect = document.getElementById('userAgentSelect');
        const locationSelect = document.getElementById('locationSelect');
        const followRedirectsCheck = document.getElementById('followRedirects');
        const seoAnalysisCheck = document.getElementById('seoAnalysis');
        const performanceAnalysisCheck = document.getElementById('performanceAnalysis');
        const securityAnalysisCheck = document.getElementById('securityAnalysis');
        const accessibilityAnalysisCheck = document.getElementById('accessibilityAnalysis');
        const detectSuspiciousCheck = document.getElementById('detectSuspicious');

        let currentAnalysisData = null;

        // Event listeners
        analyzeBtn.addEventListener('click', analyzeWebsite);
        clearCacheBtn.addEventListener('click', clearCache);
        urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                analyzeWebsite();
            }
        });

        // Fonction principale d'analyse
        async function analyzeWebsite() {
            const url = urlInput.value.trim();
            if (!url) {
                showError('Veuillez entrer une URL valide');
                return;
            }

            // Pr√©parer les options d'analyse
            const options = {
                language: languageSelect.value,
                userAgent: userAgentSelect.value,
                location: locationSelect.value,
                followRedirects: followRedirectsCheck.checked,
                seoAnalysis: seoAnalysisCheck.checked,
                performanceAnalysis: performanceAnalysisCheck.checked,
                securityAnalysis: securityAnalysisCheck.checked,
                accessibilityAnalysis: accessibilityAnalysisCheck.checked,
                detectSuspicious: detectSuspiciousCheck.checked
            };

            // UI Updates
            setLoadingState(true);

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ url, options })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Erreur lors de l\'analyse');
                }

                const data = await response.json();
                currentAnalysisData = data;
                displayResults(data);

            } catch (error) {
                console.error('Erreur:', error);
                showError(error.message);
            } finally {
                setLoadingState(false);
            }
        }

        // Fonction pour vider le cache
        async function clearCache() {
            try {
                const response = await fetch('/cache', { method: 'DELETE' });
                const result = await response.json();
                
                // Animation de feedback
                clearCacheBtn.style.background = '#28a745';
                clearCacheBtn.textContent = '‚úÖ Cache vid√© !';
                
                setTimeout(() => {
                    clearCacheBtn.style.background = '';
                    clearCacheBtn.innerHTML = 'üóëÔ∏è Vider le cache';
                }, 2000);
                
            } catch (error) {
                console.error('Erreur lors du nettoyage:', error);
            }
        }

        // Gestion de l'√©tat de chargement
        function setLoadingState(isLoading) {
            analyzeBtn.disabled = isLoading;
            
            if (isLoading) {
                loading.classList.add('show');
                results.classList.remove('show');
                analyzeBtn.innerHTML = '‚è≥ Analyse en cours...';
            } else {
                loading.classList.remove('show');
                analyzeBtn.innerHTML = 'üöÄ Lancer l\'analyse compl√®te';
            }
        }

        // Affichage des erreurs
        function showError(message) {
            results.innerHTML = `
                <div class="error-message fade-in">
                    <h3>‚ùå Erreur d'analyse</h3>
                    <p>${message}</p>
                </div>
            `;
            results.classList.add('show');
        }

        // Fonction principale d'affichage des r√©sultats
        function displayResults(data) {
            let html = generateResultHeader(data);
            html += generateResultSummary(data);
            html += generateResultTabs(data);
            
            results.innerHTML = html;
            results.classList.add('show');
            
            // Initialiser les onglets
            initializeTabs();
            
            // Smooth scroll vers les r√©sultats
            results.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // G√©n√©ration de l'en-t√™te des r√©sultats
        function generateResultHeader(data) {
            return `
                <div class="result-header fade-in">
                    <h2>üìä R√©sultats d'analyse pour</h2>
                    <h3><a href="${data.url}" target="_blank" style="color: white;">${data.url}</a></h3>
                    <p>Analys√© avec ${data.analysisOptions.userAgent} depuis ${getLocationName(data.analysisOptions.location)}</p>
                    <p>Langue d√©tect√©e: ${data.language.name} | Temps de r√©ponse: ${data.responseTime}ms</p>
                </div>
            `;
        }

        // G√©n√©ration du r√©sum√© des scores
        function generateResultSummary(data) {
            const summaryCards = [];
            
            if (data.seo) {
                summaryCards.push({
                    title: 'SEO',
                    score: data.seo.score,
                    level: data.seo.level,
                    icon: 'üìà'
                });
            }
            
            if (data.performance) {
                summaryCards.push({
                    title: 'Performance',
                    score: data.performance.score,
                    level: data.performance.level,
                    icon: '‚ö°'
                });
            }
            
            if (data.security) {
                summaryCards.push({
                    title: 'S√©curit√©',
                    score: data.security.score,
                    level: data.security.level,
                    icon: 'üîí'
                });
            }
            
            if (data.accessibility) {
                summaryCards.push({
                    title: 'Accessibilit√©',
                    score: data.accessibility.score,
                    level: data.accessibility.level,
                    icon: '‚ôø'
                });
            }

            let html = '<div class="result-summary slide-in">';
            
            summaryCards.forEach(card => {
                const scoreClass = getScoreClass(card.score);
                html += `
                    <div class="summary-card">
                        <div class="summary-score ${scoreClass}">${card.score}</div>
                        <h4>${card.icon} ${card.title}</h4>
                        <p>${card.level}</p>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        // G√©n√©ration des onglets de r√©sultats
        function generateResultTabs(data) {
            const tabs = [
                { id: 'general', title: 'üìä G√©n√©ral', active: true },
                ...(data.seo ? [{ id: 'seo', title: 'üìà SEO' }] : []),
                ...(data.performance ? [{ id: 'performance', title: '‚ö° Performance' }] : []),
                ...(data.security ? [{ id: 'security', title: 'üîí S√©curit√©' }] : []),
                ...(data.accessibility ? [{ id: 'accessibility', title: '‚ôø Accessibilit√©' }] : []),
                ...(data.suspicious ? [{ id: 'suspicious', title: 'üõ°Ô∏è S√©curit√©' }] : []),
                { id: 'technical', title: 'üîß Technique' }
            ];

            let html = '<div class="result-tabs">';
            tabs.forEach(tab => {
                html += `
                    <button class="tab-button ${tab.active ? 'active' : ''}" 
                            data-tab="${tab.id}">
                        ${tab.title}
                    </button>
                `;
            });
            html += '</div>';

            // Contenu des onglets
            html += `<div class="tab-content active" id="tab-general">${generateGeneralTab(data)}</div>`;
            
            if (data.seo) {
                html += `<div class="tab-content" id="tab-seo">${generateSEOTab(data.seo)}</div>`;
            }
            
            if (data.performance) {
                html += `<div class="tab-content" id="tab-performance">${generatePerformanceTab(data.performance)}</div>`;
            }
            
            if (data.security) {
                html += `<div class="tab-content" id="tab-security">${generateSecurityTab(data.security)}</div>`;
            }
            
            if (data.accessibility) {
                html += `<div class="tab-content" id="tab-accessibility">${generateAccessibilityTab(data.accessibility)}</div>`;
            }
            
            if (data.suspicious) {
                html += `<div class="tab-content" id="tab-suspicious">${generateSuspiciousTab(data.suspicious)}</div>`;
            }
            
            html += `<div class="tab-content" id="tab-technical">${generateTechnicalTab(data)}</div>`;

            return html;
        }

        // G√©n√©ration de l'onglet g√©n√©ral
        function generateGeneralTab(data) {
            let html = `
                <div class="result-card">
                    <h3>üìù Informations de base</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Status HTTP</strong>
                            <div class="info-value ${getStatusClass(data.status)}">${data.status}</div>
                        </div>
                        <div class="info-item">
                            <strong>Temps de r√©ponse</strong>
                            <div class="info-value ${getResponseTimeClass(data.responseTime)}">${data.responseTime}ms</div>
                        </div>
                        <div class="info-item">
                            <strong>Taille HTML</strong>
                            <div class="info-value">${data.htmlSize} Ko</div>
                        </div>
                        <div class="info-item">
                            <strong>Nombre de mots</strong>
                            <div class="info-value">${data.wordCount}</div>
                        </div>
                        <div class="info-item">
                            <strong>Langue d√©tect√©e</strong>
                            <div class="info-value">${data.language.name}</div>
                        </div>
                        <div class="info-item">
                            <strong>Serveur</strong>
                            <div class="info-value">${data.headers.server}</div>
                        </div>
                    </div>
                </div>
            `;

            // Contenu de la page
            html += `
                <div class="result-card">
                    <h3>üìÑ Structure du contenu</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Titre de la page</strong>
                            <div class="info-value">${data.title}</div>
                            <small>${data.titleLength} caract√®res</small>
                        </div>
                        <div class="info-item">
                            <strong>Meta description</strong>
                            <div class="info-value">${data.metaDescription}</div>
                            <small>${data.metaDescriptionLength} caract√®res</small>
                        </div>
                        <div class="info-item">
                            <strong>Headings H1</strong>
                            <div class="info-value">${data.headings.h1.length} trouv√©(s)</div>
                            ${data.headings.h1.length > 0 ? `<small>${data.headings.h1.slice(0, 2).join(', ')}</small>` : ''}
                        </div>
                        <div class="info-item">
                            <strong>Headings H2</strong>
                            <div class="info-value">${data.headings.h2.length} trouv√©(s)</div>
                        </div>
                    </div>
                </div>
            `;

            // M√©dias et liens
            html += `
                <div class="result-card">
                    <h3>üîó M√©dias et liens</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Images</strong>
                            <div class="info-value">${data.media.images}</div>
                        </div>
                        <div class="info-item">
                            <strong>Vid√©os</strong>
                            <div class="info-value">${data.media.videos}</div>
                        </div>
                        <div class="info-item">
                            <strong>Liens internes</strong>
                            <div class="info-value">${data.links.internal}</div>
                        </div>
                        <div class="info-item">
                            <strong>Liens externes</strong>
                            <div class="info-value">${data.links.external}</div>
                        </div>
                    </div>
                </div>
            `;

            // Technologies d√©tect√©es
            if (data.technologies && data.technologies.length > 0) {
                html += `
                    <div class="result-card">
                        <h3>‚öôÔ∏è Technologies d√©tect√©es</h3>
                        <div class="technology-tags">
                            ${data.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet SEO
        function generateSEOTab(seo) {
            const scoreClass = getScoreClass(seo.score);
            
            let html = `
                <div class="result-card">
                    <div class="score-display">
                        <div class="score-circle ${scoreClass}">
                            ${seo.score}
                        </div>
                        <div class="score-details">
                            <h4>Score SEO: ${seo.level}</h4>
                            <p>Votre site obtient ${seo.score}/100 points en r√©f√©rencement naturel</p>
                        </div>
                    </div>
                </div>
            `;

            // Points positifs
            if (seo.goodPoints && seo.goodPoints.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="good-points">
                            <h4>‚úÖ Points forts SEO</h4>
                            <ul class="recommendation-list">
                                ${seo.goodPoints.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // Recommandations
            if (seo.issues && seo.issues.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="recommendations">
                            <h4>‚ö†Ô∏è Am√©liorations recommand√©es</h4>
                            <ul class="recommendation-list">
                                ${seo.issues.map(issue => `<li>${issue}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // D√©tails SEO
            if (seo.details) {
                html += `
                    <div class="result-card">
                        <h3>üìã D√©tails SEO</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <strong>Open Graph</strong>
                                <div class="info-value ${seo.details.hasOpenGraph ? 'status-excellent' : 'status-bad'}">
                                    ${seo.details.hasOpenGraph ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>Twitter Card</strong>
                                <div class="info-value ${seo.details.hasTwitterCard ? 'status-excellent' : 'status-bad'}">
                                    ${seo.details.hasTwitterCard ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>Donn√©es structur√©es</strong>
                                <div class="info-value ${seo.details.hasStructuredData ? 'status-excellent' : 'status-bad'}">
                                    ${seo.details.hasStructuredData ? 'D√©tect√©es' : 'Absentes'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>URL canonique</strong>
                                <div class="info-value ${seo.details.canonical !== 'Non d√©finie' ? 'status-excellent' : 'status-bad'}">
                                    ${seo.details.canonical !== 'Non d√©finie' ? 'D√©finie' : 'Manquante'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet Performance
        function generatePerformanceTab(performance) {
            const scoreClass = getScoreClass(performance.score);
            
            let html = `
                <div class="result-card">
                    <div class="score-display">
                        <div class="score-circle ${scoreClass}">
                            ${performance.score}
                        </div>
                        <div class="score-details">
                            <h4>Performance: ${performance.level}</h4>
                            <p>Score de performance g√©n√©ral: ${performance.score}/100</p>
                        </div>
                    </div>
                </div>
            `;

            // M√©triques de performance
            if (performance.details) {
                html += `
                    <div class="result-card">
                        <h3>üìä M√©triques de performance</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <strong>Temps de r√©ponse</strong>
                                <div class="info-value ${getResponseTimeClass(performance.details.responseTime)}">
                                    ${performance.details.responseTime}ms
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>Nombre d'images</strong>
                                <div class="info-value">${performance.details.images}</div>
                            </div>
                            <div class="info-item">
                                <strong>Scripts JavaScript</strong>
                                <div class="info-value">${performance.details.scripts}</div>
                            </div>
                            <div class="info-item">
                                <strong>Scripts externes</strong>
                                <div class="info-value">${performance.details.externalScripts}</div>
                            </div>
                            <div class="info-item">
                                <strong>Compression</strong>
                                <div class="info-value ${performance.details.hasCompression ? 'status-excellent' : 'status-bad'}">
                                    ${performance.details.hasCompression ? 'Activ√©e' : 'D√©sactiv√©e'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>Cache navigateur</strong>
                                <div class="info-value ${performance.details.hasCaching ? 'status-excellent' : 'status-bad'}">
                                    ${performance.details.hasCaching ? 'Configur√©' : 'Non configur√©'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Recommandations de performance
            if (performance.recommendations && performance.recommendations.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="recommendations">
                            <h4>üöÄ Optimisations recommand√©es</h4>
                            <ul class="recommendation-list">
                                ${performance.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet S√©curit√©
        function generateSecurityTab(security) {
            const scoreClass = getScoreClass(security.score);
            
            let html = `
                <div class="result-card">
                    <div class="score-display">
                        <div class="score-circle ${scoreClass}">
                            ${security.score}
                        </div>
                        <div class="score-details">
                            <h4>S√©curit√©: ${security.level}</h4>
                            <p>Niveau de s√©curit√©: ${security.score}/100</p>
                        </div>
                    </div>
                </div>
            `;

            // Protocole et certificats
            html += `
                <div class="result-card">
                    <h3>üîê Protocole et chiffrement</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Protocole</strong>
                            <div class="info-value ${security.protocol === 'https:' ? 'status-excellent' : 'status-bad'}">
                                ${security.protocol === 'https:' ? 'HTTPS (S√©curis√©)' : 'HTTP (Non s√©curis√©)'}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Headers de s√©curit√©
            if (security.securityHeaders) {
                html += `
                    <div class="result-card">
                        <h3>üõ°Ô∏è Headers de s√©curit√©</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <strong>HSTS</strong>
                                <div class="info-value ${security.securityHeaders['strict-transport-security'] ? 'status-excellent' : 'status-bad'}">
                                    ${security.securityHeaders['strict-transport-security'] ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>Content Security Policy</strong>
                                <div class="info-value ${security.securityHeaders['content-security-policy'] ? 'status-excellent' : 'status-bad'}">
                                    ${security.securityHeaders['content-security-policy'] ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>X-Content-Type-Options</strong>
                                <div class="info-value ${security.securityHeaders['x-content-type-options'] ? 'status-excellent' : 'status-bad'}">
                                    ${security.securityHeaders['x-content-type-options'] ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                            <div class="info-item">
                                <strong>X-Frame-Options</strong>
                                <div class="info-value ${security.securityHeaders['x-frame-options'] ? 'status-excellent' : 'status-bad'}">
                                    ${security.securityHeaders['x-frame-options'] ? 'Configur√©' : 'Manquant'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Points forts de s√©curit√©
            if (security.goodPoints && security.goodPoints.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="good-points">
                            <h4>‚úÖ Mesures de s√©curit√© en place</h4>
                            <ul class="recommendation-list">
                                ${security.goodPoints.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // Vuln√©rabilit√©s d√©tect√©es
            if (security.issues && security.issues.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="recommendations">
                            <h4>‚ö†Ô∏è Vuln√©rabilit√©s √† corriger</h4>
                            <ul class="recommendation-list">
                                ${security.issues.map(issue => `<li>${issue}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet Accessibilit√©
        function generateAccessibilityTab(accessibility) {
            const scoreClass = getScoreClass(accessibility.score);
            
            let html = `
                <div class="result-card">
                    <div class="score-display">
                        <div class="score-circle ${scoreClass}">
                            ${accessibility.score}
                        </div>
                        <div class="score-details">
                            <h4>Accessibilit√©: ${accessibility.level}</h4>
                            <p>Conformit√© aux standards WCAG: ${accessibility.score}/100</p>
                        </div>
                    </div>
                </div>
            `;

            // Points forts d'accessibilit√©
            if (accessibility.goodPoints && accessibility.goodPoints.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="good-points">
                            <h4>‚úÖ Bonnes pratiques d'accessibilit√©</h4>
                            <ul class="recommendation-list">
                                ${accessibility.goodPoints.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // Probl√®mes d'accessibilit√©
            if (accessibility.issues && accessibility.issues.length > 0) {
                html += `
                    <div class="result-card">
                        <div class="recommendations">
                            <h4>‚ö†Ô∏è Am√©liorations d'accessibilit√©</h4>
                            <ul class="recommendation-list">
                                ${accessibility.issues.map(issue => `<li>${issue}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet Sites suspects
        function generateSuspiciousTab(suspicious) {
            const alertClass = suspicious.isSuspicious ? 'suspicious-alert' : 'suspicious-normal';
            const icon = suspicious.isSuspicious ? '‚ö†Ô∏è' : '‚úÖ';
            
            let html = `
                <div class="${alertClass}">
                    <h3>${icon} Analyse de s√©curit√© - ${suspicious.level}</h3>
                    <div style="display: flex; align-items: center; gap: 1rem; margin: 1rem 0;">
                        <div class="score-circle ${suspicious.isSuspicious ? 'score-poor' : 'score-excellent'}" style="width: 80px; height: 80px; font-size: 1.4rem;">
                            ${suspicious.score}
                        </div>
                        <div>
                            <h4 style="color: inherit; margin-bottom: 0.5rem;">Score de risque: ${suspicious.score}/100</h4>
                            <p style="margin: 0; opacity: 0.9;">
                                ${suspicious.isSuspicious ? 
                                    'Ce site pr√©sente des caract√©ristiques suspectes qui m√©ritent votre attention.' :
                                    'Ce site ne pr√©sente pas d\'indicateurs suspects majeurs.'
                                }
                            </p>
                        </div>
                    </div>
                </div>
            `;

            if (suspicious.indicators && suspicious.indicators.length > 0) {
                html += `
                    <div class="result-card">
                        <h3>üö® Indicateurs de risque d√©tect√©s</h3>
                        <ul class="recommendation-list">
                            ${suspicious.indicators.map(indicator => `<li style="border-left-color: #dc3545; background: #f8d7da;">${indicator}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                html += `
                    <div class="result-card">
                        <div class="good-points">
                            <h4>‚úÖ Aucun indicateur suspect d√©tect√©</h4>
                            <p>Le site semble respecter les bonnes pratiques de s√©curit√© de base.</p>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // G√©n√©ration de l'onglet Technique
        function generateTechnicalTab(data) {
            let html = `
                <div class="result-card">
                    <h3>üîß Headers HTTP d√©taill√©s</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong>Content-Type</strong>
                            <div class="info-value">${data.headers.contentType}</div>
                        </div>
                        <div class="info-item">
                            <strong>Content-Length</strong>
                            <div class="info-value">${data.headers.contentLength}</div>
                        </div>
                        <div class="info-item">
                            <strong>Content-Encoding</strong>
                            <div class="info-value">${data.headers.contentEncoding}</div>
                        </div>
                        <div class="info-item">
                            <strong>Cache-Control</strong>
                            <div class="info-value">${data.headers.cacheControl}</div>
                        </div>
                        <div class="info-item">
                            <strong>Last-Modified</strong>
                            <div class="info-value">${data.headers.lastModified}</div>
                        </div>
                        <div class="info-item">
                            <strong>ETag</strong>
                            <div class="info-value">${data.headers.etag}</div>
                        </div>
                    </div>
                </div>
            `;

            // Cha√Æne de redirection
            if (data.redirectChain && data.redirectChain.length > 0) {
                html += `
                    <div class="result-card">
                        <h3>üîÑ Redirections d√©tect√©es</h3>
                        <p>Le site utilise ${data.redirectChain.length} redirection(s).</p>
                        <div class="links-container">
                            ${data.redirectChain.map((redirect, index) => `
                                <div class="link-item">
                                    <div class="link-text">Redirection ${index + 1}</div>
                                    <div class="link-url">${redirect}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // M√©tadonn√©es sociales
            if (data.socialMeta && (data.socialMeta.ogTitle || data.socialMeta.twitterCard)) {
                html += `
                    <div class="result-card">
                        <h3>üì± M√©tadonn√©es sociales</h3>
                        <div class="info-grid">
                `;
                
                if (data.socialMeta.ogTitle) {
                    html += `
                        <div class="info-item">
                            <strong>Open Graph Title</strong>
                            <div class="info-value">${data.socialMeta.ogTitle}</div>
                        </div>
                    `;
                }
                
                if (data.socialMeta.ogDescription) {
                    html += `
                        <div class="info-item">
                            <strong>Open Graph Description</strong>
                            <div class="info-value">${data.socialMeta.ogDescription}</div>
                        </div>
                    `;
                }
                
                if (data.socialMeta.twitterCard) {
                    html += `
                        <div class="info-item">
                            <strong>Twitter Card</strong>
                            <div class="info-value">${data.socialMeta.twitterCard}</div>
                        </div>
                    `;
                }
                
                html += `
                        </div>
                    </div>
                `;
            }

            // Liens d√©taill√©s
            if (data.links && (data.links.internalList.length > 0 || data.links.externalList.length > 0)) {
                html += `
                    <div class="result-card">
                        <h3>üîó Analyse d√©taill√©e des liens</h3>
                `;

                if (data.links.internalList.length > 0) {
                    html += `
                        <h4>Liens internes (${data.links.internal} au total)</h4>
                        <div class="links-container">
                            ${data.links.internalList.slice(0, 20).map(link => `
                                <div class="link-item">
                                    <div class="link-text">${link.text || 'Sans texte'}</div>
                                    <div class="link-url">${link.url}</div>
                                    ${link.title ? `<small style="color: #666;">Titre: ${link.title}</small>` : ''}
                                </div>
                            `).join('')}
                        </div>
                    `;
                }

                if (data.links.externalList.length > 0) {
                    html += `
                        <h4 style="margin-top: 2rem;">Liens externes (${data.links.external} au total)</h4>
                        <div class="links-container">
                            ${data.links.externalList.slice(0, 10).map(link => `
                                <div class="link-item">
                                    <div class="link-text">${link.text || 'Sans texte'}</div>
                                    <div class="link-url">
                                        <a href="${link.url}" target="_blank" rel="noopener">${link.url}</a>
                                    </div>
                                    ${link.title ? `<small style="color: #666;">Titre: ${link.title}</small>` : ''}
                                </div>
                            `).join('')}
                        </div>
                    `;
                }

                html += `</div>`;
            }

            return html;
        }

        // Fonctions utilitaires
        function getScoreClass(score) {
            if (score >= 80) return 'score-excellent';
            if (score >= 60) return 'score-good';
            if (score >= 40) return 'score-medium';
            return 'score-poor';
        }

        function getStatusClass(status) {
            if (status === 200) return 'status-excellent';
            if (status >= 300 && status < 400) return 'status-warning';
            return 'status-bad';
        }

        function getResponseTimeClass(time) {
            if (time < 500) return 'status-excellent';
            if (time < 1000) return 'status-good';
            if (time < 3000) return 'status-warning';
            return 'status-bad';
        }

        function getLocationName(locationCode) {
            const locations = {
                'france-paris': 'France (Paris)',
                'france-nice': 'France (Nice)',
                'usa-washington': 'USA (Washington D.C.)'
            };
            return locations[locationCode] || locationCode;
        }

        // Initialisation des onglets
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');
                    
                    // D√©sactiver tous les onglets
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Activer l'onglet s√©lectionn√©
                    button.classList.add('active');
                    document.getElementById(`tab-${targetTab}`).classList.add('active');
                });
            });
        }

        // Auto-focus sur l'input au chargement
        window.addEventListener('load', () => {
            urlInput.focus();
            
            // Animation d'entr√©e
            document.querySelector('.analysis-form').classList.add('fade-in');
        });

        // Gestion des erreurs globales
        window.addEventListener('error', (e) => {
            console.error('Erreur JavaScript:', e.error);
        });

        // Service Worker pour le cache (optionnel)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(err => {
                console.log('Service Worker non disponible');
            });
        }
    </script>
</body>
</html>
